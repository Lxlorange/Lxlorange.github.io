---
title: 小云的户外徒步锻炼计划
author: 凉香栾
date: 2025-05-26 18:35:44 +0800
categories:
  - 算法题解
tags:
  - 动态规划
description: 动态规划系列参考题解三
toc: true
pin: false
math: true
mermaid: true
comment: true
media_subpath:
---

## 题目描述

> 题目来源：北京市三帆中学《2027届初一数学每日一题（第四季）》第8题  

小云计划连续 $n$ 日户外徒步锻炼，每天有“低强度”“高强度”“休息”三种方案，第$i$天低强度锻炼可以走$a_{i}$千米，高强度锻炼可以走$b_{i}$千米，且有$a_{i} \lt b_{i}$。若选择“高强度”要求前一天必须“休息”（ 第一天可选择“高强度”）。  
  
请设计一个动态规划算法，根据$(a_{i},b_{i})_{1 \le i \le n}$。计算出小云在天内户外徒步锻炼的最远距离。

## 解题思路

由于第 `i` 天的选择受第 `i-1` 天活动的影响，DP状态需包含当天的活动类型。
`dp[i][j]` 表示到第 `i` 天为止，且当天选择方案 `j` 时能达到的最远距离。
* `dp[i][0]`: 第 `i` 天**休息**
* `dp[i][1]`: 第 `i` 天**低强度**
* `dp[i][2]`: 第 `i` 天**高强度**

* **第 `i` 天休息**: 前一天活动不限。
$$
dp_{i,0} = \max(dp_{i-1,0}, dp_{i-1,1}, dp_{i-1,2})
$$
* **第 `i` 天低强度**: 前一天活动不限。
$$
dp_{i,1} = \max(dp_{i-1,0}, dp_{i-1,1}, dp_{i-1,2}) + a_i
$$
* **第 `i` 天高强度**: 前一天必须休息。
$$
dp_{i,2} = dp_{i-1,0} + b_i
$$

初始$dp_{1,0} = 0$，$dp_{1,1} = a_1$，$dp_{1,2} = b_1$
答案为第 `n` 天所有可能状态中的最大值。
$$ans = \max(dp_{n,0}, dp_{n,1}, dp_{n,2})$$


## 附AC代码

```cpp
#include <iostream>
#include <algorithm>
using namespace std;

int n,a[100010],b[100010],dp[100010][3];
int main() {
    cin >> n;
    for (int i = 1; i <= n; i++) {
        cin >> a[i] >> b[i];
    }

    dp[1][0] = 0;
    dp[1][1] = a[1];
    dp[1][2] = b[1];

    for (int i = 2; i <= n; i++) {
        dp[i][0] = max({dp[i-1][0], dp[i-1][1], dp[i-1][2]});
        dp[i][1] = max({dp[i-1][0], dp[i-1][1], dp[i-1][2]}) + a[i];
        dp[i][2] = dp[i-1][0] + b[i];
    }

    cout << max({dp[n][0], dp[n][1], dp[n][2]}) << endl;
    return 0;
}
```